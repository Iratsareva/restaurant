# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –≤ Docker

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker –∏ Docker Compose
2. Maven —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ —Å–∏—Å—Ç–µ–º–µ

## ‚ö†Ô∏è –í–∞–∂–Ω–æ: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ –Ω–æ–≤–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ)

**–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –Ω–æ–≤–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**

–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é: [DEPENDENCIES_SETUP.md](DEPENDENCIES_SETUP.md)

### –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞:
- **Windows**: `install-dependencies.cmd`
- **Linux/Mac**: `./install-dependencies.sh`

## –®–∞–≥ 1: –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:

### –î–ª—è Linux/Mac:
```bash
cd demo
mvn clean package -DskipTests

cd ../reservation-price-service
mvn clean package -DskipTests

cd ../notification-service/notification-service
mvn clean package -DskipTests

cd ../../audit-service/audit-service
mvn clean package -DskipTests
```

### –î–ª—è Windows:
```bash
cd demo
mvnw.cmd clean package -DskipTests

cd ..\reservation-price-service
mvnw.cmd clean package -DskipTests

cd ..\notification-service\notification-service
mvnw.cmd clean package -DskipTests

cd ..\..\audit-service\audit-service
mvnw.cmd clean package -DskipTests
```

## –®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

–í –∫–æ—Ä–Ω–µ–≤–æ–π –ø–∞–ø–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
docker-compose up --build -d
```

–§–ª–∞–≥ `--build` –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ—Ç –≤—Å–µ Docker –æ–±—Ä–∞–∑—ã, `-d` –∑–∞–ø—É—Å—Ç–∏—Ç –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.

## –®–∞–≥ 4: –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
docker-compose logs -f
```

–ò–ª–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:
```bash
docker-compose logs -f demo-rest
```

## –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏ (Zipkin):
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:9411

1. –ù–∞–∂–º–∏—Ç–µ "Run Query" –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö —Ç—Ä–µ–π—Å–æ–≤
2. –°–¥–µ–ª–∞–π—Ç–µ POST –∑–∞–ø—Ä–æ—Å –∫ API (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞–Ω–∏–µ –±—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
3. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É Zipkin - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –Ω–æ–≤—ã–µ —Ç—Ä–µ–π—Å—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫ (Prometheus):
–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:9091

1. –í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ: `http_server_requests_seconds_count`
2. –ù–∞–∂–º–∏—Ç–µ "Execute"
3. –í—ã —É–≤–∏–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –∫–∞–∂–¥–æ–º—É —Å–µ—Ä–≤–∏—Å—É

### –ü—Ä–æ–≤–µ—Ä–∫–∞ Actuator endpoints:
- Health: http://localhost:8080/actuator/health
- Metrics: http://localhost:8080/actuator/metrics
- Prometheus: http://localhost:8080/actuator/prometheus

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker-compose down
```

–î–ª—è –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏ (–≤–∫–ª—é—á–∞—è volumes):
```bash
docker-compose down -v
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–µ—Ä–≤–∏—Å–æ–≤

- **demo-rest** (–ø–æ—Ä—Ç 8080) - –æ—Å–Ω–æ–≤–Ω–æ–π REST API
- **reservation-price-service** (–ø–æ—Ä—Ç 9090) - gRPC —Å–µ—Ä–≤–∏—Å —Ä–∞—Å—á–µ—Ç–∞ —Ü–µ–Ω—ã
- **notification-service** (–ø–æ—Ä—Ç 8083) - WebSocket —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- **audit-service** (–ø–æ—Ä—Ç 8082) - —Å–µ—Ä–≤–∏—Å –∞—É–¥–∏—Ç–∞
- **rabbitmq** (–ø–æ—Ä—Ç—ã 5672, 15672) - –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π
- **zipkin** (–ø–æ—Ä—Ç 9411) - —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞
- **prometheus** (–ø–æ—Ä—Ç 9090) - –º–µ—Ç—Ä–∏–∫–∏
- **postgres** (–ø–æ—Ä—Ç 5433) - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—É—é Docker —Å–µ—Ç—å `microservices-net`
2. –í–Ω—É—Ç—Ä–∏ Docker —Å–µ—Ç–∏ —Å–µ—Ä–≤–∏—Å—ã –æ–±—Ä–∞—â–∞—é—Ç—Å—è –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É –ø–æ –∏–º–µ–Ω–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, `rabbitmq`, `zipkin`)
3. –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `localhost` –≤ application.properties
4. –î–ª—è Docker –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –∏–∑ docker-compose.yml

## üìã –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞](–ë–´–°–¢–†–ê–Ø_–ü–†–û–í–ï–†–ö–ê.md)** - –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **[–ü–æ–ª–Ω—ã–π –≥–∞–π–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è](–ü–û–õ–ù–´–ô_–ì–ê–ô–î_–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø.md)** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **[–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](DEPENDENCIES_SETUP.md)** - —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –Ω–∞ –Ω–æ–≤–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ
- **[Jenkins + Docker](–ü–û–õ–ù–ê–Ø_–ò–ù–°–¢–†–£–ö–¶–ò–Ø_–í–´–ü–û–õ–ù–ï–ù–ò–Ø_–ó–ê–î–ê–ù–ò–Ø.md)** - –ø–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞–Ω–∏—è
- **[–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Jenkins](–ò–°–ü–†–ê–í–õ–ï–ù–ò–ï_–û–®–ò–ë–û–ö_JENKINS.md)** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ Jenkins

## üîß –ë—ã—Å—Ç—Ä–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Jenkins

–ï—Å–ª–∏ Jenkins –ø–∞–¥–∞–µ—Ç —Å `docker: not found`:

**Windows:**
```cmd
fix_jenkins_docker.cmd
```

**Linux/Mac:**
```bash
./fix_jenkins_docker.sh
```

